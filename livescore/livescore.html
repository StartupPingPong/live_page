<head>
	<title>livescore</title>
</head>

<body>
<div class="background-container"></div>
	<div class="container">
		{{>header}}
	</div>
	
</body>

<template name="home">
	<div class="game-list-container">
		<h1 class="text-center">The Games</h1>
		{{> gamelist}}
	</div>
	<div class="live-game-container">
		<h1 class="text-center">The Live Game</h1>
		{{> live}}
	</div>
	<div class="total-score-container">
		<h1 class="text-center">The standings</h1>
		{{> totalScore}}
	</div>
</template>

<template name="header">
	<header>
		<nav class="top-bar" role="navigation">
			<section class="top-bar-section">
				<ul class="header-links">
					<li><a class="header-link" href="/game">Game List</a></li>
					<li><a class="header-link" href="/live">Live</a></li>
					<li><a class="header-link" href="/total">Total Score</a></li>
					{{#if currentUser}}
					<li><a class="header-link" href="/admin/game">Admin Game List</a></li>
					<li><a class="header-link" href="/admin/live">Admin Live</a></li>
					<li><a class="header-link" href="/admin/team">Admin Team</a></li>
					{{/if}}
				</ul>
			</section>
		</nav>
	</header>
</template>	

<template name="live">
	{{#if livegame}}
	<div class="row first-row-live">
		<div class="large-12 columns"><h1 class="text-center">{{livegame.gameType}}</h1></div>
	</div>
	<div class="row">
		<div class="large-12 columns"><h2 class="text-center">Best of {{livegame.sets}}</h2></div>
	</div>
	<div class="row hide-for-large-up">
		<div class="small-12 columns">
			<h2 class="text-center">Sets:</h2>
			<h3 class="text-center">{{livegame.teamOneSetScore}} - {{livegame.teamTwoSetScore}}</h3>
		</div>
	</div>
	<div class="row">
		<div class="large-4 columns small-6 columns">
			<h1 class="text-center team-name-live">{{livegame.teamOne}}</h1>
			<h1 class="text-center">{{livegame.teamOneScore}}</h1>
		</div>
		<div class="large-4 columns show-for-large-up	">
			<h2 class="text-center">Sets:</h2>
			<h3 class="text-center">{{livegame.teamOneSetScore}} - {{livegame.teamTwoSetScore}}</h3>
		</div>
		<div class="large-4 columns small-6 columns">
			<h1 class="text-center team-name-live">{{livegame.teamTwo}}</h1>
			<h1 class="text-center">{{livegame.teamTwoScore}}</h1>
		</div>
	</div>
	{{else}}
	<div class="row">
		<div class="large-12 columns">
			<h1 class="text-center">No active game at the moment!</h1>
		</div>
	</div>
	{{/if}}
</template>

<template name="viewGame">

	<div class="row">
		<div class="large-12 columns"><h1 class="text-center">{{game.gameType}} - Best of {{game.sets}}</h1></div>
	</div>
	<div class="row">
		<div class="large-6 columns">
			<h2 class="text-center">{{game.teamOne}} - {{game.teamOneSetScore}}</h2>
			<h3 class="text-center">{{game.teamOneScore}}</h3>
		</div>
		<div class="large-6 columns">
			<h2 class="text-center">{{game.teamTwoSetScore}} - {{game.teamTwo}}</h2>
			<h3 class="text-center">{{game.teamTwoScore}}</h3>
		</div>
	</div>
	<div class="row">
		<div class="large-12 columns"><a href="/game" class="button">Back to game list</a></div>
	</div>
</template>

<template name="teamlist">
	<div class="row">
		<div class="large-12 columns">
			<ul>
				{{#each teams}}
				<li>{{name}} - {{totalScore}}</li>
				{{/each}}
			</ul>
		</div>
	</div>
</template>

<template name="gamelist">

	<div class="row first-row-gamelist">
		<div class="large-12 columns">
			<ul class="button-group round">
				<li><a href="#" class="button {{isCurrentLocation currentLocation 'pustervik'}}" data-name="pustervik">Pustervik</a></li>
				<li><a href="#" class="button {{isCurrentLocation currentLocation 'port'}}" data-name="port">Port Du Soleil</a></li>
				<li><a href="#" class="button {{isCurrentLocation currentLocation 'park'}}" data-name="park">Park Lane</a></li>
				<li><a href="#" class="button {{isCurrentLocation currentLocation 'yaki'}}" data-name="yaki">Yaki-Da</a></li>
			</ul>
		</div>
	</div>
	<div class="row bracket-games" data-equalizer>
		<div class="medium-4 columns" data-equalizer-watch>
			<h2>Quarterfinals</h2>
			<ul class="quarter-final-games">
				{{#each findGames "Quarter" currentLocation}}
				{{>gameListItem}}
				{{/each}}
			</ul>
		</div>
		<div class="medium-4 columns semi-final-games-container" data-equalizer-watch>
			<h2>Semifinals</h2>
			<ul class="semi-final-games">
				{{#each findGames "Semi" currentLocation}}
				{{>gameListItem}}
				{{/each}}
			</ul>
		</div>
		<div class="medium-4 columns" data-equalizer-watch>
			<h2>Grandfinal</h2>
			<ul class="grand-final-games">
				{{#each findGames "Grand" currentLocation}}
				{{>gameListItem}}
				{{/each}}
			</ul>
		</div>
	</div>
	<div class="row group-games">
		<div class="large-12 columns">
			<h2>Groupstage</h2>
			<ul class="group-stage-games">
				{{#if groupStageGames currentLocation}}
				{{#each groupStageGames currentLocation}}
				{{>gameListItem}}
				{{/each}}
				{{else}}
				<h1 class="text-center">No Groupstage games at the momend</h1>
				{{/if}}
			</ul>
		</div>
	</div>

</template>

<template name="gameListItem">
	<li id="{{_id}}" class="status-{{status}} game-list-item"><a href="/game/{{_id}}">
		<ul>
			<li class="team-one team-item {{teamOneID}}" data-id="{{teamOneID}}"><p class="team-name">{{teamOne}}</p><p class="team-score right">{{teamOneSetScore}}</p></li>
			<li class="team-two team-item {{teamTwoID}}" data-id="{{teamTwoID}}"><p class="team-name">{{teamTwo}}</p><p class="team-score right">{{teamTwoSetScore}}</p></li>
		</ul>
	</a></li>
</template>

<template name="notStartedGame">
	<div class="row">
		<div class="large-12 columns">
			<h1 class="text-center">This game has not started yet!</h1>
		</div>
	</div>
</template>

<template name="admin">
	{{#if currentUser}}
	<div class="row">
		<div class="large-12 columns text-center">
			<a href="/admin/game" class="button tiny">Game List</a>
			<a href="/admin/live" class="button tiny">Live</a>
			<a href="/admin/team" class="button tiny">Team</a>
		</div>
	</div>
	{{else}}

	{{> notLoggedIn}}
	{{/if}}
</template>

<template name="adminLive">
	{{#if currentUser}}
	{{#if livegame}}
	<div class="row">
		<div class="large-12 columns admin-live-info text-center">
			<a href="/admin" class="button tiny">Back</a>
			<h1>{{livegame.gameType}} at {{livegame.eventLocation}}</h1>
			<h3>Game id: </h3><h3 id="liveGameID">{{livegame._id}}</h3>
			<h3 class="sets-container"># of sets: {{livegame.sets}}</h3>
			<input class="button tiny newSet" value="New Set" />
		</div>
	</div>
	<div class="row admin-live-score">
		<div class="large-6 columns text-right">
			<h2>{{livegame.teamOne}}</h2>
			<h3>Sets:</h3><h3 id="teamOneSetScore">{{livegame.teamOneSetScore}}</h3>
			<br />
			<input class="button tiny setOne" value="Set" data-name="{{teamOne}}" />
			<input class="button tiny alert decSetOne" value="-Set" />
			<br />
			<h3>Score:</h3><h3 id="teamOneScore">{{livegame.teamOneScore}}</h3>
			<br />
			<input class="button tiny scoreOne" value="Score" data-name="{{teamOne}}" />
			<input class="button tiny alert decOne" value="-Score" data-name="{{teamOne}}" />
		</div>
		<div class="large-6 columns">
			<h2>{{livegame.teamTwo}}</h2>
			<h3>Sets:</h3><h3 id="teamTwoSetScore">{{livegame.teamTwoSetScore}}</h3>
			<br />
			<input class="button tiny setTwo" value="Set" data-name="{{teamTwo}}" />
			<input class="button tiny alert decSetTwo" value="-Set" />
			<br />
			<h3>Score:</h3><h3 id="teamTwoScore">{{livegame.teamTwoScore}}</h3>
			<br />
			<input class="button tiny scoreTwo" value="Score" data-name="{{teamTwo}}" />
			<input class="button tiny alert decTwo" value="-Score" data-name="{{teamTwo}}" />
			
		</div>
	</div>
	{{else}}
	<div class="row">
		<div class="large-12 columns">
			<h1 class="text-center">No active game</h1>
		</div>
	</div>
	{{/if}}
	{{else}}
	{{> notLoggedIn}}
	{{/if}}
</template>

<template name="adminGameList">
	{{#if currentUser}}
	<div class="row">
		<div class="large-12 columns text-center">
			<ul class="button-group round">
				<li><a href="#" class="button location {{isCurrentLocation currentLocation 'pustervik'}}" data-name="pustervik">Pustervik</a></li>
				<li><a href="#" class="button location {{isCurrentLocation currentLocation 'port'}}" data-name="port">Port Du Soleil</a></li>
				<li><a href="#" class="button location {{isCurrentLocation currentLocation 'park'}}" data-name="park">Park Lane</a></li>
				<li><a href="#" class="button location {{isCurrentLocation currentLocation 'yaki'}}" data-name="yaki">Yaki-Da</a></li>
			</ul>
			<a href="/game/new" class="button text-center">New Game</a>
			<a href="/admin" class="button">Back</a>
		</div>
	</div>
	<div class="row">
		<div class="large-4 columns">
			<h2>Quarterfinals</h2>
			<ul>
				{{#each quarterFinalGames currentLocation}}
				{{>adminGameListItem}}
				{{/each}}
			</ul>
		</div>
		<div class="large-4 columns">
			<h2>Semifinals</h2>
			<ul>
				{{#each semiFinalGames currentLocation}}
				{{>adminGameListItem}}
				{{/each}}
			</ul>
		</div>
		<div class="large-4 columns">
			<h2>Grandfinal</h2>
			<ul>
				{{#each finalGames currentLocation}}
				{{>adminGameListItem}}
				{{/each}}
			</ul>
		</div>
	</div>
	<div class="row">
		<div class="large-12 colums">
			<h2>Groupstage</h2>
			{{#each groupStageGames currentLocation}}
			{{>adminGameListItem}}
			{{/each}}
		</div>
	</div>
	{{else}}
	{{> notLoggedIn}}
	{{/if}}
</template>

<template name="adminGameListItem">
	<li class="status-{{status}} admin-game-list-item">{{teamOne}} vs. {{teamTwo}}
		<br />
		<input class="button activate" value="Activate" data-id="{{_id}}" />
		<input class="button alert delete" value="Delete" />
		<br />
		<a href="/game/edit/{{_id}}" class="button">Edit</a>
		<ul class="button-group text-left status-group">
			<li><a href="#" class="button status" data-status="pre">Pre</a></li>
			<li><a href="#" class="button status" data-status="active">Active</a></li>
			<li><a href="#" class="button status" data-status="post">Post</a></li>
		</ul>
	</li>

</template>

<template name="newgame">
	{{#if currentUser}}
	<div class="row">
		<div class="large-12 columns">
		<h1 class="text-center">Create</h1>
			<form class="create-edit-game-form" action="/game">
				<label>Team 1
					<select name="teamOne">
						{{#each teams}}
						<option value={{name}}>{{name}}</option>
						{{/each}}
					</select>
				</label>
				<label>Team 2
					<select name="teamTwo">
						{{#each teams}}
						<option value={{name}}>{{name}}</option>
						{{/each}}
					</select>
				</label>
				<label>Game Type
					<select name="gameType">
						<option value="Groupstage">Groupstage</option>
						<option value="Quarterfinal">Quarterfinal</option>
						<option value="Semifinal">Semifinal</option>
						<option value="Grandfinal">Grandfinal</option>
					</select>
				</label>
				<label>Event Location
					<select name="eventLocation">
						<option value="pustervik">Pustervik</option>
						<option value="port">Port Du Soleil</option>
						<option value="park">Park Lane</option>
						<option value="yaki">Yaki-Da</option>
					</select>
				</label>
				<label># of sets
					<input type="radio" name="sets" value="1" id="1set" checked><label for="1set">1 Set</label>
					<input type="radio" name="sets" value="3" id="3set"><label for="1set">3 Set</label>
					<input type="radio" name="sets" value="5" id="5set"><label for="1set">5 Set</label>
				</label>
				<input type="submit" class="button" value="Create game">
			</form>
		</div>
	</div>
	{{else}}
	{{> notLoggedIn}}
	{{/if}}
</template>

<template name="editGame">
	{{#if currentUser}}
	<div class="row">
		<div class="large-12 columns">
			<h1 class="text-center">Edit Game</h1>
			<form class="create-edit-game-form">
				<label>ID
					<input type="text" name="gameID" readonly="readonly" value="{{game._id}}" >
				</label>
				<label>Team 1
					<select name="teamOne">
						{{#each teams}}
						<option value={{name}} {{isSelected name ../game.teamOne}}>{{name}}</option>
						{{/each}}
					</select>
				</label>
				<label>Score Team One
					<input type="number" name="teamOneScore" value="{{game.teamOneScore}}" required>
				</label>
				<label>Team 2
					<select name="teamTwo">
						{{#each teams}}
						<option value={{name}} {{isSelected name ../game.teamTwo}}>{{name}}</option>
						{{/each}}
					</select>
				</label>
				<label>Score Team Two
					<input type="number" name="teamTwoScore" value="{{game.teamTwoScore}}" required>
				</label>
				<label>Game Type
					<select name="gameType">
						<option value="Groupstage" {{isSelected "Groupstage" game.gameType}}>Groupstage</option>
						<option value="Quarterfinal" {{isSelected "Quarterfinal" game.gameType}}>Quarterfinal</option>
						<option value="Semifinal" {{isSelected "Semifinal" game.gameType}}>Semifinal</option>
						<option value="Grandfinal" {{isSelected "Grandfinal" game.gameType}}>Grandfinal</option>
					</select>
				</label>
				<label>Event Location
					<select name="eventLocation">
						<option value="pustervik" {{isSelected "pustervik" game.eventLocation}}>Pustervik</option>
						<option value="port" {{isSelected "port" game.eventLocation}}>Port Du Soleil</option>
						<option value="park" {{isSelected "park" game.eventLocation}}>Park Lane</option>
						<option value="yaki" {{isSelected "yaki" game.eventLocation}}>Yaki-Da</option>
					</select>
				</label>
				<label>Status
					<select name="status">
						<option value="pre" {{isSelected "pre" game.status}}>Pre</option>
						<option value="active" {{isSelected "active" game.status}}>Active</option>
						<option value="post" {{isSelected "post" game.status}}>Post</option>
					</select>
				</label>
				<label># of sets
					<input type="radio" name="sets" value="1" id="1set" {{isChecked "1" game.sets}}><label for="1set">1 Set</label>
					<input type="radio" name="sets" value="3" id="3set" {{isChecked "3" game.sets}}><label for="1set">3 Set</label>
					<input type="radio" name="sets" value="5" id="5set" {{isChecked "5" game.sets}}><label for="1set">5 Set</label>
				</label>
				<input type="submit" class="button" value="Edit game">
			</form>
		</div>
	</div>
	{{else}}
	{{> notLoggedIn}}
	{{/if}}
</template>

<template name="createTeam">
	{{#if currentUser}} 
	<div class="row">
		<div class="large-12 columns">
			<form class="create-team-form">
				<input type="text" placeholder="Team Name" name="teamName" required>
				<input type="number" placeholder="Team Score" name="teamScore" required>
				<input type="submit" class="button" value="Create team">
			</form>
		</div>
	</div>
	{{else}}
	{{> notLoggedIn}}
	{{/if}}
</template>

<template name="totalScore">
	<div class="row">
		<div class="large-12 columns">
			<table class="team-list">
				<thead>
					<tr>
						<th class="text-right">Team</th>
						<th>Points</th>
					</tr>
				</thead>
				<tbody>
					{{#each teams}}
					{{>teamListItem}}
					{{/each}}
				</tbody>
			</table>
		</div>
	</div>
</template>

<template name="teamListItem">
	<tr class="team-list-item">
		<td class="text-right team-list-item-data">{{name}}</td>
		<td class="team-list-item-data">{{totalScore}}</td>
	</tr>
</template>

<template name="adminTeam">
	{{#if currentUser}}
	<div class="row">
		<div class="large-12 columns team-column">
			<a href="/admin/team/new" class="button">New Team</a>
			<table class="team-list admin-team-list">
				<thead>
					<tr>
						<th>Team</th>
						<th>Points</th>
						<th>New Score</th>
						<th>Delete</th>
					</tr>
				</thead>
				<tbody>
					{{#each teams}}
					{{>adminTeamListItem}}
					{{/each}}
				</tbody>
			</table>
		</div>
	</div>
	{{else}}
	{{> notLoggedIn}}
	{{/if}}
</template>

<template name="adminTeamListItem">
	<tr>
		<td>{{name}}</td>
		<td>{{totalScore}}</td>
		<td>
			<form>
				<div class="row collapse">
					<div class="large-10 columns">
						<input id="{{_id}}" type="number" class="score-input" placeholder="Enter new score">
					</div>
					<div class="large-2 columns">
						<a href="#" class="button postfix" data-id="{{_id}}">Set</a>
					</div>
				</div>
			</form>
		</td>
		<td><input class="button alert delete" value="Delete team" data-id="{{_id}}" /></td>
	</tr>
</template>

<template name="adminLogin">
	<div class="row">
		<div class="large-12 columns" style="text-align:center;">
			{{> loginButtons}}
		</div>
	</div>
</template>

<template name="notLoggedIn">
	<div class="row">
		<div class="large-12 columns" style="text-align:center;">
			<h1>Ops it looks like you're not an admin...</h1>
			<h3>Here is a cute cat for the inconvenience:</h3>
			<img src="http://www.lovethispic.com/uploaded_images/44844-Cute-Cat.png">
		</div>
	</div>
</template>